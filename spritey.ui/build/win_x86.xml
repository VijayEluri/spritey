<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<project name="win_x86" default="zip">
    <property name="app.version" value="0.9"/>
    <property name="app.name" value="spritey-${app.version}"/>
    
    <property name="build.arch" value="win-x86"/>
    <property name="build.name" value="${app.name}-${build.arch}"/>
    <property name="build.dir" value="${ant.project.name}/${build.name}/${app.name}"/>
    <property name="libs.dir" value="${build.dir}/libs"/>
    <property name="spritey.ui.dir" value="${basedir}/.."/>
    <property name="spritey.core.dir" value="${spritey.ui.dir}/../spritey.core"/>
    
    <target name="clean">
        <delete dir="${ant.project.name}"/>
    </target>
        
    <target name="init">
        <mkdir dir="${libs.dir}"/>
    </target>
        
    <target name="jar" depends="clean, init">
        <jar destfile="${build.dir}/${app.name}.jar">
            <manifest>
                <attribute name="Main-Class" value="spritey.ui.Application"/>
                <attribute name="Class-Path" value=". libs/java-xmlbuilder-0.3.jar libs/org.eclipse.equinox.common_3.6.0.v20100503.jar libs/org.eclipse.jface_3.6.0.I20100601-0800.jar libs/org.eclipse.osgi_3.6.0.v20100517.jar libs/org.eclipse.swt_3.6.0.v3650b.jar libs/org.eclipse.swt.win32.win32.x86_3.6.0.v3650b.jar libs/org.eclipse.core.commands_3.6.0.I20100512-1500.jar"/>
            </manifest>
            <fileset dir="${spritey.core.dir}/bin"/>
            <fileset dir="${spritey.ui.dir}/bin"/>
        </jar>
        <copy file="${spritey.core.dir}/libs/java-xmlbuilder-0.3.jar" todir="${libs.dir}"/>
        <copy file="${spritey.ui.dir}/libs/org.eclipse.equinox.common_3.6.0.v20100503.jar" todir="${libs.dir}"/>
        <copy file="${spritey.ui.dir}/libs/org.eclipse.jface_3.6.0.I20100601-0800.jar" todir="${libs.dir}"/>
        <copy file="${spritey.ui.dir}/libs/org.eclipse.osgi_3.6.0.v20100517.jar" todir="${libs.dir}"/>
        <copy file="${spritey.ui.dir}/libs/org.eclipse.swt_3.6.0.v3650b.jar" todir="${libs.dir}"/>
        <copy file="${spritey.ui.dir}/libs/org.eclipse.swt.win32.win32.x86_3.6.0.v3650b.jar" todir="${libs.dir}"/>
        <copy file="${spritey.ui.dir}/libs/org.eclipse.core.commands_3.6.0.I20100512-1500.jar" todir="${libs.dir}"/>
    </target>

    <target name="zip" depends="jar">
        <zip destfile="${ant.project.name}/${build.name}.zip" basedir="${ant.project.name}/${build.name}"/>
        <delete dir="${ant.project.name}/${build.name}"/>
    </target>
</project>
